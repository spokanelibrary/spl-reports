<h2>Spellcheck <small>bib records</small></h2>

<ul class="nav nav-tabs hidden-print" role="tablist">
  <li role="presentation" class="active"><a href="#search-term" aria-controls="nav" role="tab" data-toggle="tab">Search a term</a></li>
  <li role="presentation" class=""><a href="#search-list" aria-controls="nav" role="tab" data-toggle="tab">Search the list</a></li>
</ul>

<!-- Tab panes -->
<form class="form-inline spl-report-control hidden-print">
	<div class="tab-content">

		<div role="tabpanel" class="tab-pane active" id="search-term">
			<h3>Search a term</h3>	
			<fieldset>
				<legend>
					Use an asterisk * to indicate wildcard expansion. e.g. Accomodat*
				</legend>
				<ul>
					<li>Otherwise, assume a space following the search term.</li>
					<li>A space is <i>always</i> assumed before the search term.</li>
				</ul>
				
				<div class="form-group">
					<label>Search term:</label>
					<input type="text" name="term"> 
				</div>


				<button type="submit" class="btn btn-success">
					Run Report <small class="glyphicon glyphicon-arrow-right"></small>
				</button>
				<a href="./" class="btn btn-default pull-right">
					<small class="glyphicon glyphicon-refresh"></small> Reset</a>
			</fieldset>
		</div>

		<div role="tabpanel" class="tab-pane" id="search-list">
		
			<h3>Search the list</h3>	
			<fieldset>
				<legend>
					Search against a precompiled list of common misspellings. 
				</legend>
				<ul>
					<li>Limit search terms to those beginning with the character selected here.</li>
					<li>Chose <code>$#@!...</code> to indicate special characters (non-alphanumeric). </li>
					<li>Letters with many terms are broken into subsets (scroll down list).</li>
				</ul>
				
				<div class="alert alert-warning collapse in" id="search-list-chars-warning">
					Loading character sets&hellip;
				</div>
				<div class="collapse" id="search-list-chars-wrapper">
					<div class="form-group">
						<label>First character:</label>
						<select class="form-control" name="list" id="search-list-chars">
						</select> 
					</div>


					<button type="submit" class="btn btn-success">
						Run Report <small class="glyphicon glyphicon-arrow-right"></small>
					</button>
				</div>

				<a href="./" class="btn btn-default pull-right">
					<small class="glyphicon glyphicon-refresh"></small> Reset</a>
			</fieldset>
		
		</div>
	</div>
</form>

<hr class="hidden-print">

<div class="spl-report-result"></div>

<br>
<br>

<div class="well well-sm spl-report-summary hidden-print">
	<h3>Note</h3>
	<p>
		This can take a while to run. 
		Please don't close your browser until it has finished!
	</p>
	<p>
		This won't completely lock up the database, but it is probably a good idea to run it when we're not open!
	</p>
</div>

<script class="spl-report-tmpl" type="text/x-handlebars-template">
{{#with report}}
	{{#unless sorted}}
		<h4>No results found</h4>
	{{else}}
		<h4>Search results ({{sorted.count}})</h4>	
		<table class="table table-condensed table-bordered table-striped">
		<tr>
			<th><i class="glyphicon glyphicon-ok"></i></th>
			<th>Bib</th>
			<th>Tag</th>
			<th>Text</th>
			<th>Match</th>
			<th>Note</th>
		</tr>
		{{#each sorted.match}}	
		<tr>
			<td class="text-center"><input type="checkbox"></td>
			<td>{{bib}}</td>
			<td>{{tag}}</td>
			<td><small>{{{text}}}</small></td>
			<td>{{match}}</td>
			<td>{{note}}</td>
		</tr>
		{{/each}}
		</table>
	{{/unless}}
{{/with}}
</script>
